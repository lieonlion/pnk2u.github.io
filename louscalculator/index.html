<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            background-color: #230017;
            font-family: monospace;
            color: white;
            font-size: large;
        }
        .headline-slider_container{
            display: inline-flex;
        }
        #between_factor_slider, #bfs-reader{
            position: relative;
            left: 4ch;
        }
        #next_factor_slider, #nfs-reader{
            position: relative;
            left: 8ch;
        }
        #bfs-reader, #nfs-reader {
            top: 1ch;
        }
        .reset-button-b, .reset-button-n{
            height: 3ch;
            position: relative;
            top: 2.5ch;
        }
        .reset-button-b {
            left:6ch;
        }
        .reset-button-n {
            left: 11ch;
        }
        .color-line-n{
            position: relative;
            left: 6ch;
        }
        .color-line-b{
            position: relative;
        }
        .color-line-nxt{
            position: relative;
            left:3ch;
        }
        .rw_hex{
            position: relative;
            width: 10ch;
            top: -2px;
        }
        .r_hsl{
            position: relative;
            width: 22.5ch;
            top: -2px;
        }
        .slctr_rgb{
            width: 4ch;
        }
    </style>
    <title>Color Calc</title>
</head>
<body>
<h2 style="text-align: center">Color Calc</h2>
<div class="headline-slider_container"><h3>New Color: Between</h3>  <label for="between_factor_slider"></label><input type="range" min="-150" max="2000" value="100" class="slider" id="between_factor_slider"><span id="bfs-reader">??</span><button class="reset-button-b">Reset (100)</button>
</div>
    <div class="color-line-n">
<span>Original Color 1:</span>
<label>
    <input id="color1slctr_rgb" class="slctr_rgb" type="color">
</label>
<label for="color1_rw_hex"></label><input id="color1_rw_hex" class="rw_hex" type="text">
<label for="color1_r_hsl"></label><input id="color1_r_hsl" class="r_hsl" type="text">
</div>
<div class="color-line-b">
<span>Original Color Between:</span>
<label>
    <input id="color3slctr_rgb" class="slctr_rgb" type="color">
</label>
<label for="color3_rw_hex"></label><input id="color3_rw_hex" class="rw_hex" type="text">
<label for="color3_r_hsl"></label><input id="color3_r_hsl" class="r_hsl" type="text">
</div>
<div class="color-line-n">
<span>Original Color 2:</span>
<label>
    <input id="color2slctr_rgb" class="slctr_rgb" type="color">
</label>
<label for="color2_rw_hex"></label><input id="color2_rw_hex" class="rw_hex" type="text">
<label for="color2_r_hsl"></label><input id="color2_r_hsl" class="r_hsl" type="text">
</div>
    <hr>
<div class="color-line-n">
<span>New Color 1:</span>
<label>
    <input id="colorN1slctr_rgb" class="slctr_rgb" type="color">
</label>
<label for="colorN1_rw_hex"></label><input id="colorN1_rw_hex" class="rw_hex" type="text">
<label for="colorN1_r_hsl"></label><input id="colorN1_r_hsl" class="r_hsl" type="text">
</div>
<div class="color-line-b">
<span>New Color Between:</span>
<label>
    <input id="colorN3slctr_rgb" class="slctr_rgb" type="color" disabled>
</label>
<label for="colorN3_rw_hex"></label><input id="colorN3_rw_hex" class="rw_hex" type="text" disabled>
<label for="colorN3_r_hsl"></label><input id="colorN3_r_hsl" class="r_hsl" type="text" disabled>
</div>
<div class="color-line-n">
<span>New Color 2:</span>
<label>
    <input id="colorN2slctr_rgb" class="slctr_rgb" type="color">
</label>
<label for="colorN2_rw_hex"></label><input id="colorN2_rw_hex" class="rw_hex" type="text">
<label for="colorN2_r_hsl"></label><input id="colorN2_r_hsl" class="r_hsl" type="text">
</div>
<hr>
<div class="headline-slider_container"><h3>New Color: Next</h3>  <label for="next_factor_slider"></label><input type="range" min="-150" max="2000" value="100" class="slider" id="next_factor_slider"><span id="nfs-reader">??</span><button class="reset-button-n">Reset (100)</button>
</div>
<div class="color-line-n">
    <span>Original Color 1:</span>
    <label>
        <input id="color1slctr_rgb_nxt" class="slctr_rgb" type="color">
    </label>
    <label for="color1_rw_hex"></label><input id="color1_rw_hex_nxt" class="rw_hex" type="text">
    <label for="color1_r_hsl"></label><input id="color1_r_hsl_nxt" class="r_hsl" type="text">
</div>
<div class="color-line-nxt">
    <span>Original Color Next:</span>
    <label>
        <input id="color3slctr_rgb_nxt" class="slctr_rgb" type="color">
    </label>
    <label for="color3_rw_hex"></label><input id="color3_rw_hex_nxt" class="rw_hex" type="text">
    <label for="color3_r_hsl"></label><input id="color3_r_hsl_nxt" class="r_hsl" type="text">
</div>
<hr>
<div class="color-line-n">
    <span>New Color 1:</span>
    <label>
        <input id="colorN1slctr_rgb_nxt" class="slctr_rgb" type="color">
    </label>
    <label for="colorN1_rw_hex"></label><input id="colorN1_rw_hex_nxt" class="rw_hex" type="text">
    <label for="colorN1_r_hsl"></label><input id="colorN1_r_hsl_nxt" class="r_hsl" type="text">
</div>
<div class="color-line-nxt">
    <span>New Color Next:</span>
    <label>
        <input id="colorN3slctr_rgb_nxt" class="slctr_rgb" type="color" disabled>
    </label>
    <label for="colorN3_rw_hex"></label><input id="colorN3_rw_hex_nxt" class="rw_hex" type="text" disabled>
    <label for="colorN3_r_hsl"></label><input id="colorN3_r_hsl_nxt" class="r_hsl" type="text" disabled>
</div>
<hr>

<script src="https://cdn.jsdelivr.net/npm/ac-colors@1/dist/ac-colors.min.js"></script>
<script>
    function initColorRW() {
        let color1field = document.getElementById("color1slctr_rgb");
        let color1_rw_hex = document.getElementById("color1_rw_hex");
        let color1_r_hsl = document.getElementById("color1_r_hsl");
        let color2field = document.getElementById("color2slctr_rgb");
        let color2_rw_hex = document.getElementById("color2_rw_hex");
        let color2_r_hsl = document.getElementById("color2_r_hsl");
        let color3field = document.getElementById("color3slctr_rgb");
        let color3_rw_hex = document.getElementById("color3_rw_hex");
        let color3_r_hsl = document.getElementById("color3_r_hsl");
        let colorN1field = document.getElementById("colorN1slctr_rgb");
        let colorN1_rw_hex = document.getElementById("colorN1_rw_hex");
        let colorN1_r_hsl = document.getElementById("colorN1_r_hsl");
        let colorN2field = document.getElementById("colorN2slctr_rgb");
        let colorN2_rw_hex = document.getElementById("colorN2_rw_hex");
        let colorN2_r_hsl = document.getElementById("colorN2_r_hsl");
        let colorN3field = document.getElementById("colorN3slctr_rgb");
        let colorN3_rw_hex = document.getElementById("colorN3_rw_hex");
        let colorN3_r_hsl = document.getElementById("colorN3_r_hsl");
        let color1field_nxt = document.getElementById("color1slctr_rgb_nxt");
        let color1_rw_hex_nxt = document.getElementById("color1_rw_hex_nxt");
        let color1_r_hsl_nxt = document.getElementById("color1_r_hsl_nxt");
        let color3field_nxt = document.getElementById("color3slctr_rgb_nxt");
        let color3_rw_hex_nxt = document.getElementById("color3_rw_hex_nxt");
        let color3_r_hsl_nxt = document.getElementById("color3_r_hsl_nxt");
        let colorN1field_nxt = document.getElementById("colorN1slctr_rgb_nxt");
        let colorN1_rw_hex_nxt = document.getElementById("colorN1_rw_hex_nxt");
        let colorN1_r_hsl_nxt = document.getElementById("colorN1_r_hsl_nxt");
        let colorN3field_nxt = document.getElementById("colorN3slctr_rgb_nxt");
        let colorN3_rw_hex_nxt = document.getElementById("colorN3_rw_hex_nxt");
        let colorN3_r_hsl_nxt = document.getElementById("colorN3_r_hsl_nxt");
        let bfs = document.getElementById("between_factor_slider")
        let bfs_reader = document.getElementById("bfs-reader")
        let nfs = document.getElementById("next_factor_slider")
        let nfs_reader = document.getElementById("nfs-reader")
        let color1 = new Color();
        let color2 = new Color();
        let color3 = new Color();
        let colorN1 = new Color();
        let colorN2 = new Color();
        let colorN3 = new Color();
        let color1_nxt = new Color();
        let color3_nxt = new Color();
        let colorN1_nxt = new Color();
        let colorN3_nxt = new Color();
        function colorReaderB() {
            bfs_reader.innerHTML = (bfs.value/10).toString();
            // OC 1
            color1_rw_hex.value = color1field.value.toString();
            color1.hex = color1field.value;
            color1.precision = 2;
            color1_r_hsl.value = color1.hslString;
            // OC 2
            color2_rw_hex.value = color2field.value.toString();
            color2.hex = color2field.value;
            color2.precision = 2;
            color2_r_hsl.value = color2.hslString;
            // OC 3 (Between)
            color3_rw_hex.value = color3field.value.toString();
            color3.hex = color3field.value;
            color3.precision = 2;
            color3_r_hsl.value = color3.hslString;
            // NC 1
            colorN1_rw_hex.value = colorN1field.value.toString();
            colorN1.hex = colorN1field.value;
            colorN1.precision = 2;
            colorN1_r_hsl.value = colorN1.hslString;
            // NC 2
            colorN2_rw_hex.value = colorN2field.value.toString();
            colorN2.hex = colorN2field.value;
            colorN2.precision = 2;
            colorN2_r_hsl.value = colorN2.hslString;
            // NC 3 (Between)
            let C_N3_H_1 = ((colorN1.hsl[0] + color3.hsl[0] - color1.hsl[0]));
            if ((180-C_N3_H_1)<=0) {C_N3_H_1 = C_N3_H_1 - 360;}
            let C_N3_H_2 = ((colorN2.hsl[0] + color3.hsl[0] - color2.hsl[0]));
            if ((180-C_N3_H_2)<=0) {C_N3_H_2 = C_N3_H_2 - 360;}
            let C_N3_H = (C_N3_H_1 + C_N3_H_2)/2;
            if (!isFinite(C_N3_H)) {C_N3_H = 0;}
            if (Math.sign(C_N3_H)===-1) {C_N3_H = 360 + C_N3_H;}
            C_N3_H = C_N3_H.toFixed(2);
            let x = colorN1.hsl[1];
            let y = color1.hsl[1];
            let z = color3.hsl[1];
            let q1;
            if (x>y) {q1=y/x;}else{q1=x/y}
            let C_N3_S_1 = (x+((x * (z / y) - x) * (Math.pow(q1, (1 + (x/bfs.value))))));
            x = colorN2.hsl[1];
            y = color2.hsl[1];
            z = color3.hsl[1];
            if (x>y) {q1=y/x;}else{q1=x/y}
            let C_N3_S_2 = (x+((x * (z / y) - x) * (Math.pow(q1, (1 + (x/bfs.value))))));
            let C_N3_S = (C_N3_S_1 + C_N3_S_2)/2;
            if (!isFinite(C_N3_S)) {C_N3_S = 0;}
            C_N3_S = C_N3_S.toFixed(2);
            x = colorN1.hsl[2];
            y = color1.hsl[2];
            z = color3.hsl[2];
            if (x>y) {q1=y/x;}else{q1=x/y}
            let C_N3_L_1 = (x+((x * (z / y) - x) * (Math.pow(q1, (1 + (x/bfs.value))))));
            x = colorN2.hsl[2];
            y = color2.hsl[2];
            z = color3.hsl[2];
            if (x>y) {q1=y/x;}else{q1=x/y}
            let C_N3_L_2 = (x+((x * (z / y) - x) * (Math.pow(q1, (1 + (x/bfs.value))))));
            let C_N3_L = (C_N3_L_1 + C_N3_L_2)/2;
            if (!isFinite(C_N3_L)) {C_N3_L = 0;}
            C_N3_L = C_N3_L.toFixed(2);
            colorN3.hsl = [C_N3_H, C_N3_S, C_N3_L];
            colorN3field.value = colorN3.hexString;
            colorN3_rw_hex.value = colorN3field.value.toString();
            colorN3.precision = 2;
            colorN3_rw_hex.value = colorN3.hexString;
            colorN3_r_hsl.value = "HSL(" + C_N3_H + ", " + C_N3_S + ", " + C_N3_L + ")";
        }
        function colorReaderN() {
            nfs_reader.innerHTML = (nfs.value/10).toString();
            // OC 1
            color1_rw_hex_nxt.value = color1field_nxt.value.toString();
            color1_nxt.hex = color1field_nxt.value;
            color1_nxt.precision = 2;
            color1_r_hsl_nxt.value = color1_nxt.hslString;
            // OC 3 (Next)
            color3_rw_hex_nxt.value = color3field_nxt.value.toString();
            color3_nxt.hex = color3field_nxt.value;
            color3_nxt.precision = 2;
            color3_r_hsl_nxt.value = color3_nxt.hslString;
            // NC 1
            colorN1_rw_hex_nxt.value = colorN1field_nxt.value.toString();
            colorN1_nxt.hex = colorN1field_nxt.value;
            colorN1_nxt.precision = 2;
            colorN1_r_hsl_nxt.value = colorN1_nxt.hslString;
            // NC 3 (Next)
            let C_N3_H_1 = ((colorN1_nxt.hsl[0] + color3_nxt.hsl[0] - color1_nxt.hsl[0]));
            if ((180-C_N3_H_1)<=0) {C_N3_H_1 = C_N3_H_1 - 360;}
            let C_N3_H = (C_N3_H_1)/1;
            if (!isFinite(C_N3_H)) {C_N3_H = 0;}
            if (Math.sign(C_N3_H)===-1) {C_N3_H = 360 + C_N3_H;}
            C_N3_H = C_N3_H.toFixed(2);
            let x = colorN1_nxt.hsl[1];
            let y = color1_nxt.hsl[1];
            let z = color3_nxt.hsl[1];
            let q1;
            if (x>y) {q1=y/x;}else{q1=x/y}
            let C_N3_S_1 = (x+((x * (z / y) - x) * (Math.pow(q1, (1 + (x/(nfs.value/10)))))));
            let C_N3_S = (C_N3_S_1)/1;
            if (!isFinite(C_N3_S)) {C_N3_S = 0;}
            C_N3_S = C_N3_S.toFixed(2);
            x = colorN1_nxt.hsl[2];
            y = color1_nxt.hsl[2];
            z = color3_nxt.hsl[2];
            if (x>y) {q1=y/x;}else{q1=x/y}
            let C_N3_L_1 = (x+((x * (z / y) - x) * (Math.pow(q1, (1 + (x/(nfs.value/10)))))));
            let C_N3_L = (C_N3_L_1)/1;
            if (!isFinite(C_N3_L)) {C_N3_L = 0;}
            C_N3_L = C_N3_L.toFixed(2);
            colorN3_nxt.hsl = [C_N3_H, C_N3_S, C_N3_L];
            colorN3field_nxt.value = colorN3_nxt.hexString;
            colorN3_rw_hex_nxt.value = colorN3field_nxt.value.toString();
            colorN3_nxt.precision = 2;
            colorN3_rw_hex_nxt.value = colorN3_nxt.hexString;
            colorN3_r_hsl_nxt.value = "HSL(" + C_N3_H + ", " + C_N3_S + ", " + C_N3_L + ")";
        }
        colorReaderB();
        colorReaderN();

        bfs.addEventListener('input', colorReaderB);
        nfs.addEventListener('input', colorReaderN);

        color1field.addEventListener('input', colorReaderB);
        color1_rw_hex.addEventListener('change', colorReaderB);
        color1_rw_hex.addEventListener('input', colorWriter1);

        color2field.addEventListener('input', colorReaderB);
        color2_rw_hex.addEventListener('change', colorReaderB);
        color2_rw_hex.addEventListener('input', colorWriter2);

        color3field.addEventListener('input', colorReaderB);
        color3_rw_hex.addEventListener('change', colorReaderB);
        color3_rw_hex.addEventListener('input', colorWriter3);

        colorN1field.addEventListener('input', colorReaderB);
        colorN1_rw_hex.addEventListener('change', colorReaderB);
        colorN1_rw_hex.addEventListener('input', colorWriterN1);

        colorN2field.addEventListener('input', colorReaderB);
        colorN2_rw_hex.addEventListener('change', colorReaderB);
        colorN2_rw_hex.addEventListener('input', colorWriterN2);

        colorN3field.addEventListener('change', colorReaderB);
        colorN3_r_hsl.addEventListener('change', colorWriterN3);

        color1field_nxt.addEventListener('input', colorReaderN);
        color1_rw_hex_nxt.addEventListener('change', colorReaderN);
        color1_rw_hex_nxt.addEventListener('input', colorWriter1_N);

        color3field_nxt.addEventListener('input', colorReaderN);
        color3_rw_hex_nxt.addEventListener('change', colorReaderN);
        color3_rw_hex_nxt.addEventListener('input', colorWriter3_N);

        colorN1field_nxt.addEventListener('input', colorReaderN);
        colorN1_rw_hex_nxt.addEventListener('change', colorReaderN);
        colorN1_rw_hex_nxt.addEventListener('input', colorWriterN1_N);

        colorN3field_nxt.addEventListener('change', colorReaderN);
        colorN3_r_hsl_nxt.addEventListener('change', colorWriterN3_N);

        function colorWriter1() {
            color1field.value = color1_rw_hex.value;
            color1.hex = color1field.value;
            color1_r_hsl.value = color1.hslString;
        }
        function colorWriter2() {
            color2field.value = color2_rw_hex.value;
            color2.hex = color2field.value;
            color2_r_hsl.value = color2.hslString;
        }
        function colorWriter3() {
            color3field.value = color3_rw_hex.value;
            color3.hex = color3field.value;
            color3_r_hsl.value = color3.hslString;
        }
        function colorWriterN1() {
            colorN1field.value = colorN1_rw_hex.value;
            colorN1.hex = colorN1field.value;
            colorN1_r_hsl.value = colorN1.hslString;
        }
        function colorWriterN2() {
            colorN2field.value = colorN2_rw_hex.value;
            colorN2.hex = colorN2field.value;
            colorN2_r_hsl.value = colorN2.hslString;
        }
        function colorWriterN3() {
            colorN3_rw_hex.value = colorN3.hexString;
            colorN3_r_hsl.value = colorN3.hslString;
        }
        function colorWriter1_N() {
            color1field_nxt.value = color1_rw_hex_nxt.value;
            color1_nxt.hex = color1field_nxt.value;
            color1_r_hsl_nxt.value = color1_nxt.hslString;
        }
        function colorWriter3_N() {
            color3field_nxt.value = color3_rw_hex_nxt.value;
            color3_nxt.hex = color3field_nxt.value;
            color3_r_hsl_nxt.value = color3_nxt.hslString;
        }
        function colorWriterN1_N() {
            colorN1field_nxt.value = colorN1_rw_hex_nxt.value;
            colorN1_nxt.hex = colorN1field_nxt.value;
            colorN1_r_hsl_nxt.value = colorN1_nxt.hslString;
        }
        function colorWriterN3_N() {
            colorN3_rw_hex_nxt.value = colorN3_nxt.hexString;
            colorN3_r_hsl_nxt.value = colorN3_nxt.hslString;
        }
    }
    initColorRW();
</script>

</body>
</html>